(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a9a17d8"],{a90b:function(e,t,n){},c8fb:function(e,t,n){"use strict";n("a90b")},cf2c:function(e,t,n){"use strict";n.r(t);n("b0c0"),n("b680"),n("e7e5");var a=n("d399"),s=(n("96cf"),n("1da1")),i=n("5530"),r=n("ade3"),o=(n("f1dc"),n("6e47")),p=n("5880"),u=n("2307"),l=n("daee"),r={components:Object(r.a)({},o.a.name,o.a),data:function(){return{show:!1,approving:!1,dealing:!1,inquiring:!1,MineV3Example:null,poolInfo:{symbol0:"",symbol1:"",balance:0,allowance:0},amount:"",getPower:0}},computed:Object(i.a)(Object(i.a)({},Object(p.mapState)(["isConnected","web3","address"])),{},{isApproved:function(){return this.amount<=0||this.poolInfo.allowance.toBN().gte(this.amount)},btnText:function(){return this.approving?this.$t("approving"):this.dealing?this.$t("dealing"):this.isApproved?this.$t("pledge.text12"):this.$t("approve")},btnDisabled:function(){return this.approving||this.dealing||this.amount<=0||this.inquiring||this.poolInfo.balance.toBN().lt(this.amount)},enableInquiry:function(){return 0<this.amount&&this.amount.toBN().lte(this.poolInfo.balance)}}),created:function(){this.isConnected&&(this.MineV3Example=new this.web3.eth.Contract(u.abi,u.address))},methods:{open:function(e){this.poolInfo=e,this.show=!0},allIn:function(){this.amount=this.poolInfo.balance,this.input()},input:function(){var n,a=this;this.inquiring||(this.enableInquiry?(this.inquiring=!0,n=setTimeout(Object(s.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.enableInquiry){e.next=4;break}return a.getPower=0,a.inquiring=!1,e.abrupt("return",clearTimeout(n));case 4:return e.next=6,a.MineV3Example.methods.pendingIncrementPowerByDepositLP(a.address,a.poolInfo.poolId,a.amount.toWei()).call();case 6:t=e.sent,a.getPower=t.currentPower.toBN().minus(t.originPower).toFixed(),a.inquiring=!1,clearTimeout(n);case 10:case"end":return e.stop()}},e)})),1e3)):this.getPower=0)},approve:function(){var a=this,i=(this.approving=!0,new this.web3.eth.Contract(l,this.poolInfo.lpToken));i.methods.approve(u.address,"100000000".toWei()).send({from:this.address}).on("receipt",function(){var t=Object(s.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.methods.allowance(a.address,u.address).call();case 2:n=e.sent,a.poolInfo.allowance=n.fromWei(),0<a.amount&&a.input(),a.approving=!1,a.deposit();case 7:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()).on("error",function(e){a.approving=!1})},deposit:function(){var n=this;return Object(s.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isApproved){e.next=2;break}return e.abrupt("return",n.approve());case 2:return n.dealing=!0,t=n.MineV3Example.methods.incrementPowerByDepositLP(n.poolInfo.poolId,n.amount.toWei()),e.prev=4,e.next=7,t.call({from:n.address});case 7:t.send({from:n.address}).on("receipt",function(){var t=Object(s.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.a.success(n.$t("successful_transaction")),n.$emit("refreshData"),n.amount="",n.getPower=0,n.dealing=!1,n.show=!1;case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()).on("error",function(e){n.dealing=!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),n.dealing=!1;case 14:case"end":return e.stop()}},e,null,[[4,10]])}))()}}},o=(n("c8fb"),n("2877")),i=Object(o.a)(r,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!t.show}}},[e("div",{staticClass:"deposit",on:{click:function(e){e.stopPropagation()}}},[e("div",{staticClass:"tokens"},[e("div",[e("img",{attrs:{src:n("a44c")}}),e("div",{staticClass:"pair-name"},[e("span",[t._v(t._s(t.poolInfo.symbol0)+"-"+t._s(t.poolInfo.symbol1)+"/LP")]),e("span",[t._v(t._s(t.poolInfo.balance.toFixed(2)))])])]),e("div",{staticClass:"get-lp",on:{click:function(e){return t.$router.push("/join-fund-pool")}}},[t._v(" "+t._s(t.$t("pledge.text5"))+" ")])]),e("div",{staticClass:"title"},[t._v(t._s(t.$t("pledge.text1")))]),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"0"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.input]}}),e("van-button",{attrs:{disabled:0==t.poolInfo.balance},on:{click:t.allIn}},[t._v(t._s(t.$t("pledge.text3")))])],1),e("div",{staticClass:"get-power"},[e("span",[t._v(t._s(t.$t("pledge.text4")))]),e("span",[t._v(t._s(t.getPower))])]),e("van-button",{attrs:{loading:t.approving||t.dealing,disabled:t.btnDisabled,"loading-text":t.btnText},on:{click:t.deposit}},[t._v(t._s(t.btnText))])],1)])},[],!1,null,"4ba79772",null);t.default=i.exports},daee:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"pauser","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimal","type":"uint8"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"new_operator","type":"address"},{"internalType":"address","name":"new_pauser","type":"address"}],"name":"changeUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}}]);