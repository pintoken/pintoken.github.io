(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ea4e0084"],{2994:function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("c0c2")},"2bdd":function(e,t,n){"use strict";var s=n("d282");var a=n("a8c1"),i=n("5fbe"),o=n("543e"),n=Object(s.a)("list"),s=n[0],r=n[1],c=n[2];t.a=s({mixins:[Object(i.a)(function(e){this.scroller||(this.scroller=Object(a.c)(this.$el)),e(this.scroller,"scroll",this.check)})],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var o=this;this.$nextTick(function(){if(!(o.innerLoading||o.finished||o.error)){var e,t=o.$el,n=o.scroller,s=o.offset,a=o.direction,n=n.getBoundingClientRect?n.getBoundingClientRect():{top:0,bottom:n.innerHeight};if(!(n.bottom-n.top)||(t=t,i=window.getComputedStyle(t),e="none"===i.display,t=null===t.offsetParent&&"fixed"!==i.position,e)||t)return!1;var i=o.$refs.placeholder.getBoundingClientRect();("up"===a?n.top-i.top<=s:i.bottom-n.bottom<=s)&&(o.innerLoading=!0,o.$emit("input",!0),o.$emit("load"))}})},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var e=this.$createElement;if(this.innerLoading&&!this.finished)return e("div",{key:"loading",class:r("loading")},[this.slots("loading")||e(o.a,{attrs:{size:"16"}},[this.loadingText||c("loading")])])},genFinishedText:function(){var e=this.$createElement;if(this.finished){var t=this.slots("finished")||this.finishedText;if(t)return e("div",{class:r("finished-text")},[t])}},genErrorText:function(){var e=this.$createElement;if(this.error){var t=this.slots("error")||this.errorText;if(t)return e("div",{on:{click:this.clickErrorText},class:r("error-text")},[t])}}},render:function(){var e=arguments[0],t=e("div",{ref:"placeholder",key:"placeholder",class:r("placeholder")});return e("div",{class:r(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():t,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():t])}})},4336:function(e,t,n){},"799b":function(e,t,n){"use strict";n("9dfd")},"8a58":function(e,t,n){"use strict";n("68ef"),n("a71a"),n("9d70"),n("3743"),n("4d75")},"9bfe":function(e,t,n){"use strict";n("4336")},"9dfd":function(e,t,n){},bab4:function(e,t,a){"use strict";a.r(t);a("99af"),a("4de4"),a("4160"),a("fb6a"),a("b0c0"),a("b680"),a("d3b7"),a("159b"),a("96cf");var o=a("1da1"),n=a("5530"),s=a("ade3"),i=(a("68ef"),a("e3b3"),a("543e")),r=(a("2994"),a("2bdd")),c=(a("9d70"),a("3743"),a("1a04"),a("1146"),a("f032"),a("861b")),l=a.n(c),d=a("1988"),c=a("d282"),u=a("ba31"),h=a("1325"),f=a("565f"),c=Object(c.a)("search"),g=c[0],p=c[1],b=c[2];function m(e,t,n,s){var a={attrs:s.data.attrs,on:Object(d.a)({},s.listeners,{keypress:function(e){13===e.keyCode&&(Object(h.c)(e),Object(u.a)(s,"search",t.value)),Object(u.a)(s,"keypress",e)}})},i=Object(u.b)(s);return i.attrs=void 0,e("div",l()([{class:p({"show-action":t.showAction}),style:{background:t.background}},i]),[null==n.left?void 0:n.left(),e("div",{class:p("content",t.shape)},[function(){if(n.label||t.label)return e("div",{class:p("label")},[n.label?n.label():t.label])}(),e(f.a,l()([{attrs:{type:"search",border:!1,value:t.value,leftIcon:t.leftIcon,rightIcon:t.rightIcon,clearable:t.clearable,clearTrigger:t.clearTrigger},scopedSlots:{"left-icon":n["left-icon"],"right-icon":n["right-icon"]}},a]))]),function(){if(t.showAction)return e("div",{class:p("action"),attrs:{role:"button",tabindex:"0"},on:{click:function(){n.action||(Object(u.a)(s,"input",""),Object(u.a)(s,"cancel"))}}},[n.action?n.action():t.actionText||b("cancel")])}()])}m.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var v,c=g(m),g=(a("8a58"),a("e41f")),k=a("daee"),w=a("2f62"),x=a("a49b"),y={},g={components:(v={},Object(s.a)(v,g.a.name,g.a),Object(s.a)(v,c.name,c),Object(s.a)(v,r.a.name,r.a),Object(s.a)(v,i.a.name,i.a),v),data:function(){return{value:"",show:!1,hotList:[],allTokens:[],cacheTokens:[],loading:!1,finished:!1,empty:!1,searching:!1,who:"",start:0,end:10}},computed:Object(n.a)({},Object(w.b)(["chainId","web3","address"])),created:function(){var t=this;fetch(x.e[this.chainId]).then(function(e){return e.json()}).then(function(e){t.hotList=e.hot,y=e})},methods:{onInput:function(){var n,s=this;return""===this.value?(this.empty=!1,this.start=10,this.end=20,this.searching=!1,this.allTokens=this.cacheTokens,!1):!this.searching&&(this.searching=!0,void setTimeout(Object(o.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0<s.value.length)return t=s.web3.utils.isAddress(s.value),e.next=4,t?s.getTokenByAddress():s.getTokenBySymbol();e.next=8;break;case 4:t=e.sent,s.empty=0===t.length,s.allTokens=t,s.searching=!1;case 8:clearTimeout(n);case 9:case"end":return e.stop()}},e)})),500))},getTokenBySymbol:function(){var o=this;return new Promise(function(n){var t=o.value.length,s=y.all.filter(function(e){return e.symbol.slice(0,t)===o.value.toUpperCase()});if(0<s.length){for(var e=new o.web3.BatchRequest,a=0;a<s.length;a++){var i=new o.web3.eth.Contract(k,s[a].address);e.add(i.methods.balanceOf(o.address).call.request({from:o.address}))}e.requestManager.sendBatch(e.requests,function(e,t){e||(t.forEach(function(e,t){s[t].balance=("string"==typeof e?e:e.result).fromWei(s[t].decimals).toFixed(4)}),n(s))})}else n([])})},getTokenByAddress:function(){var o=this;return new Promise(function(a){var n=y.all.filter(function(e){return e.address.toLowerCase()===o.value.toLowerCase()}),e=new o.web3.BatchRequest;if(0<n.length){for(var t=0;t<n.length;t++){var s=new o.web3.eth.Contract(k,n[t].address);e.add(s.methods.balanceOf(o.address).call.request({from:o.address}))}e.requestManager.sendBatch(e.requests,function(e,t){e||(t.forEach(function(e,t){n[t].balance=("string"==typeof e?e:e.result).fromWei(n[t].decimals).toFixed(4)}),a(n))})}else{var i=new o.web3.eth.Contract(k,o.value);e.add(i.methods.name().call.request({from:o.address})),e.add(i.methods.symbol().call.request({from:o.address})),e.add(i.methods.decimals().call.request({from:o.address})),e.add(i.methods.balanceOf(o.address).call.request({from:o.address})),e.requestManager.sendBatch(e.requests,function(e,t){var n,s;e||(e=("string"==typeof t[0]?t[0]:t[0].result).decode(["string"]),n=t[1].result.decode(["string"]),s=t[2].result.decode(["uint8"]),t=t[3].result.decode(["uint256"]).fromWei(s).toFixed(4),a([{name:e,symbol:n,decimals:s,balance:t,address:o.value,chainId:56,logoURI:"/bsc/unknown.svg"}]))})}})},open:function(e){this.show=!0,this.who=e},close:function(){this.show=!1},select:function(e){this.$emit("select",e,this.who),this.show=!1},onLoad:function(){var i=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,t,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.end>=y.all.length&&i.start>=y.all.length)return i.loading=!1,i.finished=!0,e.abrupt("return",!1);e.next=4;break;case 4:for(n=y.all.slice(i.start,i.end),t=new i.web3.BatchRequest,s=0;s<n.length;s++)a=new i.web3.eth.Contract(k,n[s].address),t.add(a.methods.balanceOf(i.address).call.request({from:i.address}));t.requestManager.sendBatch(t.requests,function(e,t){e||(t.forEach(function(e,t){n[t].balance=("string"==typeof e?e:e.result).fromWei(n[t].decimals).toFixed(4)}),0===i.start&&10===i.end&&(i.cacheTokens=n),i.allTokens=i.allTokens.concat(n),i.loading=!1,i.start=i.end,i.end+=10)});case 8:case"end":return e.stop()}},e)}))()}}},c=(a("799b"),a("9bfe"),a("2877")),r=Object(c.a)(g,function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("van-popup",{attrs:{round:"",position:"bottom"},model:{value:n.show,callback:function(e){n.show=e},expression:"show"}},[s("div",{staticClass:"search-token"},[s("van-search",{attrs:{"show-action":"",placeholder:n.$t("searchToken.text1"),"action-text":n.$t("searchToken.text7"),background:"#fff"},on:{input:n.onInput,cancel:n.close},model:{value:n.value,callback:function(e){n.value=e},expression:"value"}}),s("span",{staticClass:"title"},[n._v(n._s(n.$t("searchToken.text2")))]),s("div",{staticClass:"referral-tokens"},[s("div",n._l(n.hotList,function(t){return s("div",{key:t.address,on:{click:function(e){return n.select(t)}}},[s("img",{attrs:{src:t.logoURI}}),s("span",{domProps:{textContent:n._s(t.symbol)}})])}),0)]),s("span",{staticClass:"title"},[n._v(n._s(n.$t("searchToken.text3")))]),s("div",{staticClass:"all-tokens"},[s("van-list",{directives:[{name:"show",rawName:"v-show",value:!n.empty&&!n.searching,expression:"!empty && !searching"}],attrs:{finished:n.finished,"finished-text":n.$t("searchToken.text4")},on:{load:n.onLoad},model:{value:n.loading,callback:function(e){n.loading=e},expression:"loading"}},n._l(n.allTokens,function(t){return s("div",{key:t.address,on:{click:function(e){return n.select(t)}}},[s("div",[s("img",{attrs:{src:t.logoURI}}),s("div",[s("span",{class:void 0!==t.balance?"icon":"",domProps:{textContent:n._s(t.symbol)}}),s("span",{domProps:{textContent:n._s(t.name)}})])]),s("div",[void 0!==t.balance?s("span",[n._v(n._s(t.balance))]):s("span"),s("span",{domProps:{textContent:n._s(t.address.slice(0,5)+"..."+t.address.slice(-5))}})])])}),0),s("div",{directives:[{name:"show",rawName:"v-show",value:n.empty&&!n.searching,expression:"empty && !searching"}],staticClass:"empty"},[s("img",{attrs:{src:a("d4cd")}}),s("span",[n._v(n._s(n.$t("searchToken.text5")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:n.searching,expression:"searching"}],staticClass:"loading"},[s("van-loading",{attrs:{type:"spinner",color:"#3C94FF","text-color":"#404D66",vertical:""}},[n._v(n._s(n.$t("searchToken.text6")))])],1)],1)],1)])},[],!1,null,"67589a50",null);t.default=r.exports},c0c2:function(e,t,n){},d4cd:function(e,t,n){e.exports=n.p+"img/tokens-empty.e425a848.png"},e41f:function(e,t,n){"use strict";var s=n("d282"),r=n("a142"),a=n("6605"),c=n("ad06"),n=Object(s.a)("popup"),s=n[0],l=n[1];t.a=s({mixins:[Object(a.a)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){function e(t){return function(e){return n.$emit(t,e)}}var n=this;this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},methods:{onClickCloseIcon:function(e){this.$emit("click-close-icon",e),this.close()}},render:function(){var e,t,n,s,a,i,o=arguments[0];if(this.shouldRender)return e=this.round,t=this.position,n=this.duration,s="center"===t,a=this.transition||(s?"van-fade":"van-popup-slide-"+t),i={},Object(r.c)(n)&&(i[s?"animationDuration":"transitionDuration"]=n+"s"),o("transition",{attrs:{appear:this.transitionAppear,name:a},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[o("div",{directives:[{name:"show",value:this.value}],style:i,class:l(((s={round:e})[t]=t,s["safe-area-inset-bottom"]=this.safeAreaInsetBottom,s)),on:{click:this.onClick}},[this.slots(),this.closeable&&o(c.a,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.onClickCloseIcon}})])])}})},f032:function(e,t,n){}}]);