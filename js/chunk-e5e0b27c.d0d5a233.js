(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e5e0b27c"],{2994:function(t,e,s){"use strict";s("68ef"),s("e3b3"),s("c0c2")},"2bdd":function(t,e,s){"use strict";var i=s("d282");var n=s("a8c1"),a=s("5fbe"),r=s("543e"),s=Object(i.a)("list"),i=s[0],o=s[1],c=s[2];e.a=i({mixins:[Object(a.a)(function(t){this.scroller||(this.scroller=Object(n.c)(this.$el)),t(this.scroller,"scroll",this.check)})],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var r=this;this.$nextTick(function(){if(!(r.innerLoading||r.finished||r.error)){var t,e=r.$el,s=r.scroller,i=r.offset,n=r.direction,s=s.getBoundingClientRect?s.getBoundingClientRect():{top:0,bottom:s.innerHeight};if(!(s.bottom-s.top)||(e=e,a=window.getComputedStyle(e),t="none"===a.display,e=null===e.offsetParent&&"fixed"!==a.position,t)||e)return!1;var a=r.$refs.placeholder.getBoundingClientRect();("up"===n?s.top-a.top<=i:a.bottom-s.bottom<=i)&&(r.innerLoading=!0,r.$emit("input",!0),r.$emit("load"))}})},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:o("loading")},[this.slots("loading")||t(r.a,{attrs:{size:"16"}},[this.loadingText||c("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:o("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:o("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",key:"placeholder",class:o("placeholder")});return t("div",{class:o(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},"368a":function(t,e,s){},"4fc6":function(t,e,n){"use strict";n.r(e);n("caad"),n("b0c0"),n("b680"),n("2532"),n("e7e5");var s,i=n("d399"),a=(n("96cf"),n("1da1")),r=n("5530"),o=n("ade3"),c=(n("2994"),n("2bdd")),d=(n("ab71"),n("58e6")),l=n("2f62"),u=n("1b70"),h=n("2307"),d={components:(s={},Object(o.a)(s,d.a.name,d.a),Object(o.a)(s,c.a.name,c.a),s),data:function(){return{MineV3Example:null,dealing:!1,refreshing:!1,loading:!1,finished:!1,skip:0,staticPower:0,toAddress:"",amount:"",deductPower:"1%",detailsList:[]}},computed:Object(r.a)(Object(r.a)({},Object(l.b)(["isConnected","web3","address"])),{},{btnDisabled:function(){return this.dealing||this.toAddress<=0||this.amount<=0||this.amount.toBN().gt(this.staticPower)}}),created:function(){this.isConnected&&this.init()},methods:{input:function(){this.amount<=0?this.deductPower="1%":this.deductPower=parseInt(this.amount.toBN().times(.01).toFixed())},transfer:function(){var s=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.web3.utils.isAddress(s.toAddress)){t.next=2;break}return t.abrupt("return",i.a.fail(s.$t("invalid_address")));case 2:return s.dealing=!0,e=s.MineV3Example.methods.transfer(s.toAddress,s.amount),t.prev=4,t.next=7,e.call({from:s.address});case 7:e.send({from:s.address}).on("receipt",function(t){i.a.success(s.$t("successful_transaction")),s.init(),s.onRefresh(),s.toAddress="",s.amount="",s.dealing=!1}).on("error",function(t){s.dealing=!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),s.dealing=!1;case 14:case"end":return t.stop()}},t,null,[[4,10]])}))()},init:function(){var s=this,t=new this.web3.eth.Contract(h.abi,h.address);(this.MineV3Example=t).methods.balancePowerOf(this.address).call(function(t,e){t||(s.staticPower=e)})},onLoad:function(){var i=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.address){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i.getDetailsList(i.skip);case 4:for(e=t.sent,i.refreshing&&(i.detailsList=[],i.refreshing=!1),s=0;s<e.length;s++)i.detailsList.push(e[s]);i.loading=!1,i.skip+=10,e.length<10&&(i.finished=!0);case 10:case"end":return t.stop()}},t)}))()},onRefresh:function(){this.finished=!1,this.skip=0,this.loading=!0,this.onLoad()},getDetailsList:function(o){var c=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,s,i,n,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.c)(c.address,o);case 3:e=t.sent,s=[],i=0;case 6:i<e.length?(n=!e[i].power.includes("-"),a="",r=e[i].power,t.t0=e[i].source,t.next="Pledge"===t.t0?12:"Transfer"===t.t0?14:17):t.next=23;break;case 12:return a=c.$t("powerSource.".concat(n?"Pledge":"Redeem")),t.abrupt("break",19);case 14:return r=n?parseInt(r.toBN().times(.99).toFixed()):r,a=c.$t("powerSource.".concat(n?"TransferIn":"TransferOut")),t.abrupt("break",19);case 17:return a=c.$t("powerSource.".concat(e[i].source)),t.abrupt("break",19);case 19:s.push({source:a,isAdd:n,power:r,date:c.$toTime(e[i].time,"Y/M/D H:i")});case 20:i++,t.next=6;break;case 23:return t.abrupt("return",s);case 26:return t.prev=26,t.t1=t.catch(0),t.abrupt("return",[]);case 30:case"end":return t.stop()}},t,null,[[0,26]])}))()}}},o=(n("b6be"),n("721a"),n("2877")),c=Object(o.a)(d,function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"my-power"},[i("div",{staticClass:"form-container"},[i("div",{staticClass:"form-background"},[i("div",{staticClass:"form"},[i("div",{staticClass:"label"},[s._v(s._s(s.$t("receiver_address")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:s.toAddress,expression:"toAddress"}],staticClass:"receiver",attrs:{autofocus:"",placeholder:"0x..."},domProps:{value:s.toAddress},on:{input:function(t){t.target.composing||(s.toAddress=t.target.value)}}}),i("div",{staticClass:"label"},[s._v(s._s(s.$t("transfer_amount")))]),i("div",{staticClass:"amount"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.amount,expression:"amount"}],attrs:{type:"number",placeholder:"0"},domProps:{value:s.amount},on:{input:[function(t){t.target.composing||(s.amount=t.target.value)},s.input]}}),i("div",{staticClass:"balance"},[i("span",[s._v(s._s(s.$t("available_power")))]),i("span",[s._v(s._s(s.staticPower))])])]),i("div",{staticClass:"gasPrice",domProps:{innerHTML:s._s(s.$t("my_power_tips.tip1",{burn:s.deductPower}))}}),i("van-button",{attrs:{loading:s.dealing,disabled:s.btnDisabled,"loading-text":s.$t("dealing")},on:{click:s.transfer}},[s._v(s._s(s.$t("confirm")))])],1)])]),i("div",{staticClass:"details-title"},[s._v(s._s(s.$t("power_details")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:s.detailsList.length,expression:"detailsList.length"}],staticClass:"details-tag"},[i("span",[s._v(s._s(s.$t("time")))]),i("span",[s._v(s._s(s.$t("type")))]),i("span",[s._v(s._s(s.$t("power")))])]),i("van-pull-refresh",{attrs:{"pulling-text":s.$t("pulling"),"loosing-text":s.$t("loosing"),"loading-text":s.$t("loading")},on:{refresh:s.onRefresh},model:{value:s.refreshing,callback:function(t){s.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{finished:s.finished,"loading-text":s.$t("loading")},on:{load:s.onLoad},model:{value:s.loading,callback:function(t){s.loading=t},expression:"loading"}},[i("div",{staticClass:"details-list"},s._l(s.detailsList,function(t,e){return i("div",{key:e,staticClass:"list-item"},[i("span",[s._v(s._s(t.date))]),i("span",[s._v(s._s(t.source))]),i("span",{class:{minus:!t.isAdd}},[s._v(s._s(t.power))])])}),0),i("template",{slot:"finished"},[i("div",{directives:[{name:"show",rawName:"v-show",value:s.detailsList.length,expression:"detailsList.length"}],staticClass:"van-list__finished-text"},[s._v(" "+s._s(s.$t("no_more"))+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!s.detailsList.length,expression:"!detailsList.length"}],staticClass:"details-empty"},[i("img",{attrs:{src:n("d5e6")}}),i("span",[s._v(s._s(s.$t("no_transactions_found")))])])])],2)],1)],1)},[],!1,null,"5b0ea6ac",null);e.default=c.exports},"58e6":function(t,e,s){"use strict";var i=s("d282"),n=s("1325"),a=s("a8c1"),r=s("3875"),o=s("543e"),s=Object(i.a)("pull-refresh"),i=s[0],c=s[1],d=s[2],l=["pulling","loosing","success"];e.a=i({mixins:[r.a],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:[Number,String],value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:50}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(50!==this.headHeight)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(a.c)(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(a.b)(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling)&&0<=this.deltaY&&"vertical"===this.direction&&(Object(n.c)(t),this.setStatus(this.ease(this.deltaY)))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick(function(){t.$emit("refresh")})):this.setStatus(0))},ease:function(t){var e=+(this.pullDistance||this.headHeight);return e<t&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)},setStatus:function(t,e){e=e?"loading":0===t?"normal":t<(this.pullDistance||this.headHeight)?"pulling":"loosing";this.distance=t,e!==this.status&&(this.status=e)},genStatus:function(){var t,e=this.$createElement,s=this.status,i=this.distance,i=this.slots(s,{distance:i});return i||(i=[],t=this[s+"Text"]||d(s),-1!==l.indexOf(s)&&i.push(e("div",{class:c("text")},[t])),"loading"===s&&i.push(e(o.a,{attrs:{size:"16"}},[t])),i)},showSuccessTip:function(){var t=this;this.status="success",setTimeout(function(){t.setStatus(0)},this.successDuration)}},render:function(){var t=arguments[0],e={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:c()},[t("div",{ref:"track",class:c("track"),style:e},[t("div",{class:c("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}})},"6ab3":function(t,e,s){},"721a":function(t,e,s){"use strict";s("368a")},ab71:function(t,e,s){"use strict";s("68ef"),s("e3b3"),s("6ab3")},b6be:function(t,e,s){"use strict";s("e412")},c0c2:function(t,e,s){},e412:function(t,e,s){}}]);