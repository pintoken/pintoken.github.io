(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0cdfa574"],{"156a":function(e,t,s){s("1651"),s("80fd"),s("8c1d"),s("6bf5"),s("4bb3")},"18a2":function(e,t,s){s("b619")},"51df":function(e,t,s){var n=s("f9e1"),r=s("8223"),i=s("04ba"),c=s("bdaf"),s=Object(n.a)("popup"),n=s[0],l=s[1];t.a=n({mixins:[Object(i.a)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){function e(t){return function(e){return s.$emit(t,e)}}var s=this;this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},methods:{onClickCloseIcon:function(e){this.$emit("click-close-icon",e),this.close()}},render:function(){var e,t,s,n,i,a,o=arguments[0];if(this.shouldRender)return e=this.round,t=this.position,s=this.duration,n="center"===t,i=this.transition||(n?"van-fade":"van-popup-slide-"+t),a={},Object(r.c)(s)&&(a[n?"animationDuration":"transitionDuration"]=s+"s"),o("transition",{attrs:{appear:this.transitionAppear,name:i},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[o("div",{directives:[{name:"show",value:this.value}],style:a,class:l(((n={round:e})[t]=t,n["safe-area-inset-bottom"]=this.safeAreaInsetBottom,n)),on:{click:this.onClick}},[this.slots(),this.closeable&&o(c.a,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.onClickCloseIcon}})])])}})},"653d":function(e,t,s){var n=s("f9e1");var i=s("14c7"),a=s("b11e"),o=s("4fc1"),s=Object(n.a)("list"),n=s[0],r=s[1],c=s[2];t.a=n({mixins:[Object(a.a)(function(e){this.scroller||(this.scroller=Object(i.c)(this.$el)),e(this.scroller,"scroll",this.check)})],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var o=this;this.$nextTick(function(){if(!(o.innerLoading||o.finished||o.error)){var e,t=o.$el,s=o.scroller,n=o.offset,i=o.direction,s=s.getBoundingClientRect?s.getBoundingClientRect():{top:0,bottom:s.innerHeight};if(!(s.bottom-s.top)||(t=t,a=window.getComputedStyle(t),e="none"===a.display,t=null===t.offsetParent&&"fixed"!==a.position,e)||t)return!1;var a=o.$refs.placeholder.getBoundingClientRect();("up"===i?s.top-a.top<=n:a.bottom-s.bottom<=n)&&(o.innerLoading=!0,o.$emit("input",!0),o.$emit("load"))}})},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var e=this.$createElement;if(this.innerLoading&&!this.finished)return e("div",{key:"loading",class:r("loading")},[this.slots("loading")||e(o.a,{attrs:{size:"16"}},[this.loadingText||c("loading")])])},genFinishedText:function(){var e=this.$createElement;if(this.finished){var t=this.slots("finished")||this.finishedText;if(t)return e("div",{class:r("finished-text")},[t])}},genErrorText:function(){var e=this.$createElement;if(this.error){var t=this.slots("error")||this.errorText;if(t)return e("div",{on:{click:this.clickErrorText},class:r("error-text")},[t])}}},render:function(){var e=arguments[0],t=e("div",{ref:"placeholder",key:"placeholder",class:r("placeholder")});return e("div",{class:r(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():t,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():t])}})},"6cd7":function(e,t,s){},"9dfe":function(e,t,s){s("1651"),s("035d"),s("bf95")},b619:function(e,t,s){},bab4:function(e,t,n){n.r(t);n("1651"),n("035d");var s=n("4fc1"),i=(n("9dfe"),n("653d")),a=(n("8c1d"),n("6bf5"),n("e369"),n("0765"),n("6cd7"),n("7a6c")),o=n.n(a),r=n("9c0e"),a=n("f9e1"),c=n("19e6"),l=n("2090"),d=n("2f02"),a=Object(a.a)("search"),h=a[0],u=a[1],f=a[2];function g(e,t,s,n){var i={attrs:n.data.attrs,on:Object(r.a)({},n.listeners,{keypress:function(e){13===e.keyCode&&(Object(l.c)(e),Object(c.a)(n,"search",t.value)),Object(c.a)(n,"keypress",e)}})},a=Object(c.b)(n);return a.attrs=void 0,e("div",o()([{class:u({"show-action":t.showAction}),style:{background:t.background}},a]),[null==s.left?void 0:s.left(),e("div",{class:u("content",t.shape)},[function(){if(s.label||t.label)return e("div",{class:u("label")},[s.label?s.label():t.label])}(),e(d.a,o()([{attrs:{type:"search",border:!1,value:t.value,leftIcon:t.leftIcon,rightIcon:t.rightIcon,clearable:t.clearable,clearTrigger:t.clearTrigger},scopedSlots:{"left-icon":s["left-icon"],"right-icon":s["right-icon"]}},i]))]),function(){if(t.showAction)return e("div",{class:u("action"),attrs:{role:"button",tabindex:"0"},on:{click:function(){s.action||(Object(c.a)(n,"input",""),Object(c.a)(n,"cancel"))}}},[s.action?s.action():t.actionText||f("cancel")])}()])}g.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var a=h(g),h=(n("156a"),n("51df")),p=n("daee"),m=n("6eef"),v=n("a49b");let b={},k={components:{[h.a.name]:h.a,[a.name]:a,[i.a.name]:i.a,[s.a.name]:s.a},data(){return{value:"",show:!1,hotList:[],allTokens:[],cacheTokens:[],loading:!1,finished:!1,empty:!1,searching:!1,who:"",start:0,end:10}},computed:{...Object(m.b)(["chainId","web3","address"])},created(){this.fetchData()},watch:{chainId(){this.fetchData()}},methods:{fetchData(){fetch(v.e[this.chainId]).then(e=>e.json()).then(e=>{this.hotList=e.hot,b=e}).catch(()=>{this.hotList=v.f[this.chainId],b={all:v.f[this.chainId]}})},onInput(){if(""===this.value)return this.empty=!1,this.start=10,this.end=20,this.searching=!1,this.allTokens=this.cacheTokens,!1;if(this.searching)return!1;this.searching=!0;let t=setTimeout(async()=>{var e;0<this.value.length&&(e=await(this.web3.utils.isAddress(this.value)?this.getTokenByAddress():this.getTokenBySymbol()),this.empty=0===e.length,this.allTokens=e,this.searching=!1),clearTimeout(t)},500)},getTokenBySymbol(){return new Promise(s=>{let t=this.value.length,n=b.all.filter(e=>e.symbol.slice(0,t)===this.value.toUpperCase());if(0<b.length){var i=new this.web3.BatchRequest;for(let e=0;e<n.length;e++){var a=new this.web3.eth.Contract(p,n[e].address);i.add(a.methods.balanceOf(this.address).call.request({from:this.address}))}i.requestManager.sendBatch(i.requests,(e,t)=>{e||(t.forEach((e,t)=>{n[t].balance=("string"==typeof e?e:e.result).fromWei(n[t].decimals).toFixed(4)}),s(n))})}else s([])})},getTokenByAddress(){return new Promise(i=>{let s=b.all.filter(e=>e.address.toLowerCase()===this.value.toLowerCase());var t=new this.web3.BatchRequest;if(0<s.length){for(let e=0;e<s.length;e++){var n=new this.web3.eth.Contract(p,s[e].address);t.add(n.methods.balanceOf(this.address).call.request({from:this.address}))}t.requestManager.sendBatch(t.requests,(e,t)=>{e||(t.forEach((e,t)=>{s[t].balance=("string"==typeof e?e:e.result).fromWei(s[t].decimals).toFixed(4)}),i(s))})}else{var e=new this.web3.eth.Contract(p,this.value);t.add(e.methods.name().call.request({from:this.address})),t.add(e.methods.symbol().call.request({from:this.address})),t.add(e.methods.decimals().call.request({from:this.address})),t.add(e.methods.balanceOf(this.address).call.request({from:this.address})),t.requestManager.sendBatch(t.requests,(e,t)=>{var s,n;e||(e=("string"==typeof t[0]?t[0]:t[0].result).decode(["string"]),s=t[1].result.decode(["string"]),n=t[2].result.decode(["uint8"]),t=t[3].result.decode(["uint256"]).fromWei(n).toFixed(4),i([{name:e,symbol:s,decimals:n,balance:t,address:this.value,chainId:56,logoURI:"/bsc/unknown.svg"}]))})}})},open(e){this.show=!0,this.who=e},close(){this.show=!1},select(e){this.$emit("select",e,this.who),this.show=!1},async onLoad(){if(this.end>=b.all.length&&this.start>=b.all.length)return this.loading=!1,!(this.finished=!0);let s=b.all.slice(this.start,this.end);var t,n=new this.web3.BatchRequest;for(let e=0;e<s.length;e++)s[e].address.toLowerCase()==v.h[this.chainId].main.address.toLocaleLowerCase()?n.add(this.web3.eth.getBalance.request(this.address,"latest")):(t=new this.web3.eth.Contract(p,s[e].address),n.add(t.methods.balanceOf(this.address).call.request({from:this.address})));n.requestManager.sendBatch(n.requests,(e,t)=>{e||(t.forEach((e,t)=>{s[t].balance=("string"==typeof e?e:e.result).fromWei(s[t].decimals).toFixed(4)}),0===this.start&&10===this.end&&(this.cacheTokens=s),this.allTokens=this.allTokens.concat(s),this.loading=!1,this.start=this.end,this.end+=10)})}}},w=k,y=w,x=(n("ef49"),n("18a2"),n("6707")),T=Object(x.a)(y,function(){var s=this,e=s._self._c;s._self._setupProxy;return e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:s.show,callback:function(e){s.show=e},expression:"show"}},[e("div",{staticClass:"search-token"},[e("van-search",{attrs:{"show-action":"",placeholder:s.$t("searchToken.text1"),"action-text":s.$t("searchToken.text7"),background:"#fff"},on:{input:s.onInput,cancel:s.close},model:{value:s.value,callback:function(e){s.value=e},expression:"value"}}),e("span",{staticClass:"title"},[s._v(s._s(s.$t("searchToken.text2")))]),e("div",{staticClass:"referral-tokens"},[e("div",s._l(s.hotList,function(t){return e("div",{key:t.address,on:{click:function(e){return s.select(t)}}},[e("img",{attrs:{src:t.logoURI}}),e("span",{domProps:{textContent:s._s(t.symbol)}})])}),0)]),e("span",{staticClass:"title"},[s._v(s._s(s.$t("searchToken.text3")))]),e("div",{staticClass:"all-tokens"},[e("van-list",{directives:[{name:"show",rawName:"v-show",value:!s.empty&&!s.searching,expression:"!empty && !searching"}],attrs:{finished:s.finished,"finished-text":s.$t("searchToken.text4")},on:{load:s.onLoad},model:{value:s.loading,callback:function(e){s.loading=e},expression:"loading"}},s._l(s.allTokens,function(t){return e("div",{key:t.address,on:{click:function(e){return s.select(t)}}},[e("div",[e("img",{attrs:{src:t.logoURI}}),e("div",[e("span",{class:void 0!==t.balance?"icon":"",domProps:{textContent:s._s(t.symbol)}}),e("span",{domProps:{textContent:s._s(t.name)}})])]),e("div",[void 0!==t.balance?e("span",[s._v(s._s(t.balance))]):e("span"),e("span",{domProps:{textContent:s._s(t.address.slice(0,5)+"..."+t.address.slice(-5))}})])])}),0),e("div",{directives:[{name:"show",rawName:"v-show",value:s.empty&&!s.searching,expression:"empty && !searching"}],staticClass:"empty"},[e("img",{attrs:{src:n("d4cd")}}),e("span",[s._v(s._s(s.$t("searchToken.text5")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.searching,expression:"searching"}],staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#3C94FF","text-color":"#404D66",vertical:""}},[s._v(s._s(s.$t("searchToken.text6")))])],1)],1)],1)])},[],!1,null,"67589a50",null);t.default=T.exports},bf95:function(e,t,s){},d4cd:function(e,t,s){e.exports=s.p+"img/tokens-empty.e425a848.png"},d8c5:function(e,t,s){},ef49:function(e,t,s){s("d8c5")}}]);