(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7370935a"],{"05f9":function(e,t,n){},"4d6d":function(e,t,n){n("05f9")},cf2c:function(e,t,n){n.r(t);n("cdf1"),n("f8b6");var a=n("36ad"),i=(n("7d8c"),n("7541")),s=n("6eef"),o=n("2307"),p=n("daee"),i={components:{[i.a.name]:i.a},data(){return{show:!1,approving:!1,dealing:!1,inquiring:!1,MineV3Example:null,poolInfo:{symbol0:"",symbol1:"",balance:0,allowance:0},amount:"",getPower:0}},computed:{...Object(s.b)(["isConnected","web3","address"]),isApproved(){return this.amount<=0||this.poolInfo.allowance.toBN().gte(this.amount)},btnText(){return this.approving?this.$t("approving"):this.dealing?this.$t("dealing"):this.isApproved?this.$t("pledge.text12"):this.$t("approve")},btnDisabled(){return this.approving||this.dealing||this.amount<=0||this.inquiring||this.poolInfo.balance.toBN().lt(this.amount)},enableInquiry(){return 0<this.amount&&this.amount.toBN().lte(this.poolInfo.balance)}},created(){this.isConnected&&(this.MineV3Example=new this.web3.eth.Contract(o.abi,o.address))},methods:{open(e){this.poolInfo=e,this.show=!0},allIn(){this.amount=this.poolInfo.balance,this.input()},input(){if(!this.inquiring)if(this.enableInquiry){this.inquiring=!0;let t=setTimeout(async()=>{if(!this.enableInquiry)return this.getPower=0,this.inquiring=!1,clearTimeout(t);var e=await this.MineV3Example.methods.pendingIncrementPowerByDepositLP(this.address,this.poolInfo.poolId,this.amount.toWei()).call();this.getPower=e.currentPower.toBN().minus(e.originPower).toFixed(),this.inquiring=!1,clearTimeout(t)},1e3)}else this.getPower=0},approve(){this.approving=!0;let n=new this.web3.eth.Contract(p,this.poolInfo.lpToken);n.methods.approve(o.address,"100000000".toWei()).send({from:this.address}).on("receipt",async e=>{var t=await n.methods.allowance(this.address,o.address).call();this.poolInfo.allowance=t.fromWei(),0<this.amount&&this.input(),this.approving=!1,this.deposit()}).on("error",e=>{this.approving=!1})},async deposit(){if(!this.isApproved)return this.approve();this.dealing=!0;var e=this.MineV3Example.methods.incrementPowerByDepositLP(this.poolInfo.poolId,this.amount.toWei());try{await e.call({from:this.address}),e.send({from:this.address}).on("receipt",async e=>{a.a.success(this.$t("successful_transaction")),this.$emit("refreshData"),this.amount="",this.getPower=0,this.dealing=!1,this.show=!1}).on("error",e=>{this.dealing=!1})}catch(e){this.dealing=!1}}}},s=(n("4d6d"),n("6707")),s=Object(s.a)(i,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!t.show}}},[e("div",{staticClass:"deposit",on:{click:function(e){e.stopPropagation()}}},[e("div",{staticClass:"tokens"},[e("div",[e("img",{attrs:{src:n("a44c")}}),e("div",{staticClass:"pair-name"},[e("span",[t._v(t._s(t.poolInfo.symbol0)+"-"+t._s(t.poolInfo.symbol1)+"/LP")]),e("span",[t._v(t._s(t.poolInfo.balance.toFixed(2)))])])]),e("div",{staticClass:"get-lp",on:{click:function(e){return t.$router.push("/join-fund-pool")}}},[t._v(" "+t._s(t.$t("pledge.text5"))+" ")])]),e("div",{staticClass:"title"},[t._v(t._s(t.$t("pledge.text1")))]),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"0"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.input]}}),e("van-button",{attrs:{disabled:0==t.poolInfo.balance},on:{click:t.allIn}},[t._v(t._s(t.$t("pledge.text3")))])],1),e("div",{staticClass:"get-power"},[e("span",[t._v(t._s(t.$t("pledge.text4")))]),e("span",[t._v(t._s(t.getPower))])]),e("van-button",{attrs:{loading:t.approving||t.dealing,disabled:t.btnDisabled,"loading-text":t.btnText},on:{click:t.deposit}},[t._v(t._s(t.btnText))])],1)])},[],!1,null,"4ba79772",null);t.default=s.exports},daee:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"pauser","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimal","type":"uint8"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"new_operator","type":"address"},{"internalType":"address","name":"new_pauser","type":"address"}],"name":"changeUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}}]);