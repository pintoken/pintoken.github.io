(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38f52a98"],{"256c":function(t,e,a){a.r(e);a("f8b6");var i=a("36ad"),n=(a("6f0a"),a("bdaf")),s=(a("7d8c"),a("7541")),o=a("6eef"),r=a("2307"),s={components:{[s.a.name]:s.a,[n.a.name]:n.a},data(){return{show:!1,showRule:!1,dealing:!1,MineV3Example:null,energyValue:0,todayMine:0,lastWeekBurnAverage:0,rewardTotalAmount:0,redepositedAmount:0,power:0,earned:0}},computed:{...Object(o.b)(["isConnected","web3","address"]),actualAmount(){return this.rewardTotalAmount.toBN().minus(this.redepositedAmount).toFixed()}},methods:{open(t){this.earned=t,this.init(),this.show=!0,this.$nextTick(()=>{this.initCanvas(0)})},async takeReward(){if(this.rewardTotalAmount.toBN().lte(0))return i.a.fail(this.$t("mining.text19"));this.dealing=!0;var t=this.MineV3Example.methods.takeReward();try{await t.call({from:this.address}),t.send({from:this.address}).on("receipt",t=>{this.$emit("refreshData"),i.a.success(this.$t("mining.text20")),this.dealing=!1,this.show=!1}).on("error",t=>{this.dealing=!1})}catch(t){this.dealing=!1}},async init(){var t=new this.web3.eth.Contract(r.abi,r.address);(this.MineV3Example=t).methods.pendingEnergyValue().call((t,e)=>{t||(t=e.value.toBN().div(1e10).gt(100),this.energyValue=t?100:e.value.fromWei(10),this.lastWeekBurnAverage=e.weeklyAverage.fromWei(),this.$nextTick(()=>{this.initCanvas(this.energyValue)}))}),t.methods.earnInfo().call((t,e)=>{t||(this.todayMine=e.earnedRawrd.fromWei())}),this.earned.toBN().gt(0)&&t.methods.takeReward().call({from:this.address},(t,e)=>{var a;t||({rewardTotalAmount:t,redepositedAmount:e,power:a}=e,this.rewardTotalAmount=t.fromWei(),this.redepositedAmount=e.fromWei(),this.power=a)})},initCanvas(t){var e=document.getElementById("circle-container"),a=document.querySelector("#circle-container>canvas");let i=a.getContext("2d");var n=e.offsetWidth,e=e.offsetWidth;let s=Math.round(n/2),o=Math.round(e/2+7.5);a.style.width=n+"px",a.style.height=e+"px";var r=window.devicePixelRatio,a=(a.width=n*r,a.height=e*r,i.scale(r,r),t<50?20:t<70?10:6);let d=i.createLinearGradient(0,0,n,0),l=(d.addColorStop(0,"#F9C85D"),d.addColorStop(1,"#FA4317"),0),c=setInterval(()=>{.9<l/t?l+=.3:.8<l/t?l+=.55:.7<l/t?l+=.75:l+=1,l>=t&&(l=t,clearInterval(c)),i.clearRect(0,0,2*s,2*o),this.circle({ctx:i,x:s,y:o,lineWidth:15}),this.sector({ctx:i,x:s,y:o,lineWidth:15,gradient:d,process:l})},a)},circle({ctx:t,x:e,y:a,lineWidth:i}){t.beginPath(),t.lineWidth=i,t.lineCap="round",t.strokeStyle="#F1DAA4",t.arc(e,a,73,+Math.PI,0),t.stroke()},sector({ctx:t,x:e,y:a,lineWidth:i,process:n,gradient:s}){t.beginPath(),t.lineWidth=i,t.lineCap="round",t.strokeStyle=s,t.arc(e,a,73,+Math.PI,+Math.PI+n/100*(3*Math.PI/3)),t.stroke()}}},n=(a("5203"),a("6707")),o=Object(n.a)(s,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("van-overlay",{attrs:{show:e.show},on:{click:function(t){e.show=!e.show}}},[t("div",{staticClass:"take-reward",on:{click:function(t){t.stopPropagation()}}},[t("div",{staticClass:"progress",attrs:{id:"circle-container"}},[t("canvas"),t("div",{staticClass:"content"},[t("span",[e._v(e._s(e.energyValue.toFixed(2))+"%")]),t("span",[e._v(e._s(e.$t("energy_value")))])])]),t("van-icon",{attrs:{name:"question-o"},on:{click:function(t){e.showRule=!0}}}),t("div",{staticClass:"info"},[t("div",[t("span",[e._v(e._s(e.todayMine.toFixed(2)))]),t("span",[e._v(e._s(e.$t("today_output")))])]),t("i"),t("div",[t("span",[e._v(e._s(e.lastWeekBurnAverage.toFixed(2)))]),t("span",[e._v(e._s(e.$t("burn_average")))])])]),t("div",{staticClass:"details"},[t("div",[t("span",[e._v(e._s(e.$t("available"))+"PIN")]),t("span",[e._v(e._s(e.rewardTotalAmount.toFixed(2)))])]),t("div",[t("span",[e._v(e._s(e.$t("claim_RI"))+"PIN")]),t("span",[e._v("-"+e._s(e.redepositedAmount.toFixed(2)))])]),t("div",[t("span",[e._v(e._s(e.$t("get_power")))]),t("span",[e._v("+"+e._s(e.power))])]),t("div",[t("span",[e._v(e._s(e.$t("actual_arrival"))+"PIN")]),t("span",[e._v(e._s(e.actualAmount.toFixed(2)))])])])],1),t("van-button",{attrs:{disabled:e.dealing,loading:e.dealing,"loading-text":e.$t("confirming")},on:{click:function(t){return t.stopPropagation(),e.takeReward.apply(null,arguments)}}},[e._v(e._s(e.$t("mining.text56")))]),t("van-overlay",{attrs:{show:e.showRule},on:{click:function(t){t.stopPropagation(),e.showRule=!e.showRule}}},[t("div",{staticClass:"rules",on:{click:function(t){t.stopPropagation()}}},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.$t("rule_description")))]),t("van-icon",{attrs:{name:"close"},on:{click:function(t){e.showRule=!1}}})],1),t("div",{staticClass:"content"},[e._v(e._s(e.$t("take_rule")))])])])],1)},[],!1,null,"7f67ca66",null);e.default=o.exports},5203:function(t,e,a){a("73ed")},"73ed":function(t,e,a){}}]);