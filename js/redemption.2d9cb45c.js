(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["redemption"],{"0430":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{attrs:{round:"",closeable:"",position:"bottom"},on:{"click-close-icon":t.close},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"trading-setup"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("tradingSetup.text1")))]),i("div",{staticClass:"slippage-setting"},[i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.$t("tradingSetup.text2")))]),i("div",[i("input",{attrs:{type:"number"},domProps:{value:t.gasPrices},on:{input:t.input}}),i("span",[t._v("%")])])]),i("van-slider",{attrs:{min:"1",max:"5",step:"0.5","button-size":"15","active-color":"#3C94FF","inactive-color":"#D8D8D8"},model:{value:t.gasPrices>=5?5:t.gasPrices,callback:function(e){t.gasPrices>=5||(t.gasPrices=e)},expression:"gasPrices >=5 ? 5 :gasPrices "}}),i("div",{staticClass:"slider-items"},[i("span",[t._v("1%")]),i("span",[t._v("2%")]),i("span",[t._v("3%")]),i("span",[t._v("4%")]),i("span",[t._v("5%")])]),i("span",[t._v(t._s(t.$t("tradingSetup.text3")))])],1),i("div",{staticClass:"deadline"},[i("div",[i("span",[t._v(t._s(t.$t("tradingSetup.text4")))]),i("van-field",{attrs:{type:"number","input-align":"center"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}}),i("span",[t._v(t._s(t.$t("tradingSetup.text5")))])],1),i("span",[t._v(t._s(t.$t("tradingSetup.text6")))])]),i("van-button",{attrs:{type:"info"},on:{click:t.setSlipPoint}},[t._v(t._s(t.$t("tradingSetup.text7")))])],1)])},a=[],s=(i("a9e3"),{props:{slipPoints:{type:String,require:!0}},data:function(){return{value:2,deadline:10,show:!1,slipPoint:2}},computed:{gasPrices:function(){return this.value=this.slipPoints}},methods:{open:function(){this.show=!0},setSlipPoint:function(){console.log(this.slipPoints),this.$emit("change",{slipPoint:this.slipPoint,deadline:60*Number(this.deadline)}),this.show=!1},input:function(t){this.slipPoint=t.target.value}}}),o=s,c=o,r=(i("dc9b"),i("2877")),d=Object(r["a"])(c,n,a,!1,null,"68d88a95",null);e["default"]=d.exports},1450:function(t,e,i){"use strict";i("688f")},"1b07":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAArCAMAAAAniNp/AAACB1BMVEUAAAAAAACAgIBVVVWAgIBmZmZVVVWAgIBgYGBmZmZqampiYmJ2dnZtbW1mZmZ3d3dwcHBpaWl4eHhxcXFra2tzc3NtbW1oaGh0dHRvb29qampwcHBsbGxoaGhxcXFtbW1qampycnJubm5zc3NwcHBsbGxxcXFtbW1xcXFubm5ycnJvb29wcHBra2txcXFxcXFtbW1wcHBra2twcHBubm5sbGxvb29tbW1xcXFtbW1sbGxubm5xcXFvb29wcHBubm5vb29xcXFvb29wcHBwcHBxcXFvb29ubm5wcHBwcHBwcHBvb29ubm5ubm5vb29wcHBvb29wcHBwcHBwcHBxcXFwcHBubm5wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29vb29vb29wcHBwcHBxcXFwcHBwcHBvb29wcHBwcHBxcXFwcHBvb29wcHBvb29wcHBvb29vb29vb29vb29wcHBwcHBwcHBwcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBwcHBvb29vb29wcHBwcHBwcHBwcHBvb29wcHBwcHBwcHBwcHBvb29wcHBwcHBwcHBvb29wcHBvb29wcHBwcHBwcHBvb29wcHBwcHBvb29vb29wcHBvb29wcHBwcHBxcXFwcHBwcHBvb29wcHBwcHBvb29wcHBwcHCQV+RjAAAArHRSTlMAAQIDBAUGBggKDA0NDg8PEBEREhMUFRYWFxgZGhsbHB0dHh8gISIjJCUmJykrKy0vMDIyMzQ1NjY4Ozw9PkBDRUZMUlRWV1hZW2Rnb3Z3e3x9gIaKi42Njo+RkpWWl5manJ+foqOkpqipq6ytrrCxsrO1t7i4uru9vsDBwsPExcbHyczMzc7P0NPU2Nra29zd39/h4uXm5+nq7e7w8vP19vf4+fn6+/z8/f7+3+FbNgAAAe9JREFUOMuN02dXE0EUBuDZTSSKWVsMokajYAsiNuyKBUWMil1RYi+IvYuxABbAhopRFIySjBkyO++P9AOHk93N7I7329zznJlz3zmXEEctG8CPxweW6MSr6jKA4D+PzPRC+s6mE2+Hke9d46l8/mDDixGRWk68y2ccpeL1FIUigeMmP6ZCZGIP0lGlqhfYr0SB73hi72jloSJ1GYOazdR97FzoRAchSq1mY0rwpxUOtBeYZTEb+gWQb59vR3EgUjDrPgsO5POPoq5Iq+0zs13AQzbyIOKCtJUfTNocB9ZeZezebDmqeW/SlmAjEJt2jbE75VL0zKQJgzQCMRK6ydhJKXozdMYgo4iEb/06J0WLthhkDJHw1jL5dDopIKK75WRF5P+R5reicXK0atfkAorsmStFX9JnjTE0ryN9WoqSnCaMURR9zrOHpGhBF6ctwTgwJ5Lk9Pwk+XSLX3LavA9Y3c7pxaluEcRe8WwP0MFzl0LuOS3t5hzgudbpXmFW93Ig1xa2tBqAakfgNe84u2E1ZAew2fkttd1tZbbGCoF40eKFS+3n8UO4riuX+gp+VynRJobWgAr57opcU4lKVX3D8OEJPoXaPij+JnfPCPg9B9j2iSOTup+o97yr8kLGFMCfoKcqWX+q8+vA7aL3/gGiXb7ce59HPAAAAABJRU5ErkJggg=="},"1eac":function(t,e,i){"use strict";i("ab2b")},"332e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"redemption"},[n("div",{staticClass:"box"},[n("div",{staticClass:"container"},[n("div",{staticClass:"logos"},[n("div",[n("img",{attrs:{src:t.info.logo0}}),n("img",{attrs:{src:t.info.logo1}})]),n("span",[t._v(t._s(t.info.symbol0+"/"+t.info.symbol1))])]),n("div",{staticClass:"info"},[n("div",[n("span",[t._v(t._s(t.info.symbol0))]),n("span",[t._v(t._s(t.info.amount0.toFixed(4)))])]),n("div",[n("span",[t._v(t._s(t.info.symbol1))]),n("span",[t._v(t._s(t.info.amount1.toFixed(4)))])]),n("div",[n("span",[t._v(t._s(t.$t("redemption.text2")))]),n("span",{domProps:{textContent:t._s(t.info.lp.toFixed(4))}})])]),n("div",{staticClass:"setting"},[n("span",[t._v(t._s(t.$t("redemption.text3")))]),n("span",[t._v(t._s(t.value)+"%")]),n("van-slider",{attrs:{disabled:t.disabled,"active-color":"#3C94FF","inactive-color":"#E4E4E4"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("div",{staticClass:"buttons"},[n("van-button",{attrs:{type:"info",disabled:t.disabled},on:{click:function(e){t.value=25}}},[t._v("25%")]),n("van-button",{attrs:{type:"info",disabled:t.disabled},on:{click:function(e){t.value=50}}},[t._v("50%")]),n("van-button",{attrs:{type:"info",disabled:t.disabled},on:{click:function(e){t.value=75}}},[t._v("75%")]),n("van-button",{attrs:{type:"info",disabled:t.disabled},on:{click:function(e){t.value=100}}},[t._v(t._s(t.$t("redemption.text4")))])],1)],1),n("div",{staticClass:"rate"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateToggle,expression:"!rateToggle"}]},[t._v(t._s(t.$t("redemption.text5")+" 1 "+t.info.symbol0+"≈"+t.rate+" "+t.info.symbol1))]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.rateToggle,expression:"rateToggle"}]},[t._v(t._s(t.$t("redemption.text5")+" 1 "+t.info.symbol1+"≈"+t.reRate+" "+t.info.symbol0))]),n("img",{attrs:{src:i("1b07")},on:{click:function(e){t.rateToggle=!t.rateToggle}}})]),n("div",{staticClass:"coin"},[n("img",{attrs:{src:t.info.logo0}}),n("span",[t._v(t._s(t.token0.toFixed(6)+" "+t.info.symbol0))])]),n("div",{staticClass:"coin"},[n("img",{attrs:{src:t.info.logo1}}),n("span",[t._v(t._s(t.token1.toFixed(6)+" "+t.info.symbol1))])]),n("div",{staticClass:"redemption-button"},[n("div",{staticClass:"setting",on:{click:t.openSetting}},[n("img",{attrs:{src:i("b012")}})]),n("van-button",{attrs:{type:"info"},on:{click:t.removeLiquidity}},[t._v(t._s(t.$t("redemption.text6")))])],1)])]),n("trading-setup",{ref:"tradingSetup",on:{change:t.changeDeadline}})],1)},a=[],s=(i("caad"),i("a9e3"),i("b680"),i("d3b7"),i("2532"),i("96cf"),i("1da1")),o=i("5530"),c=i("b9cc"),r=i("5880"),d=i("a49b"),l={components:{"trading-setup":function(){return i.e("redemption").then(i.bind(null,"0430"))}},data:function(){return{info:null,amount:"0",rate:"0",reRate:"0",rateToggle:!1,contract:null,allowance:"0".toBN(),value:25,token0:"0",token1:"0",deadline:600,disabled:!1,disabled1:!1}},computed:Object(o["a"])({},Object(r["mapState"])(["chainId"])),created:function(){var t=JSON.parse(this.$route.query.info),e=t.decimals0,i=t.decimals1,n=t.reserve0,a=t.reserve1,s=t.amount0,o=t.amount1,r=t.address,l=t.symbol0,u=t.symbol1,b="1".toWei(e).toBN().times(a).div(n).toFixed(0).fromWei(i),v="1".toWei(i).toBN().times(n).div(a).toFixed(0).fromWei(e);this.info=JSON.parse(this.$route.query.info),this.rate=Number(b)?b.toFixed(6):"<0.000001",this.reRate=Number(v)?v.toFixed(6):"<0.000001",this.contract=new this.$web3.eth.Contract(c,r),this.amount=this.info.lp.toBN().div(100).times(25).toFixed().toFixed(18),this.token0=s.toBN().div(100).times(25).toFixed().toFixed(e),this.token1=o.toBN().div(100).times(25).toFixed().toFixed(i),this.chainId===d["b"].binance&&(this.disabled=[l,u].includes("AI"),this.disabled1=[l,u].includes("CS")&&[l,u].includes("PIN")),this.init()},methods:{openSetting:function(){this.$refs.tradingSetup.open()},changeDeadline:function(t){var e=t.deadline;this.deadline=e},init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var i=new t.$web3.BatchRequest,n=t.info,a=n.symbol0,s=n.amount0,o=n.amount1,c=t.$Router.options.address;(t.disabled||t.disabled1)&&(c=t["$".concat(t.disabled1?"CSRouter":"AIRouter")].options.address),i.add(t.contract.methods.allowance(t.$address,c).call.request({from:t.$address})),i.add(t.$contracts.AIToken.methods.remainingLimit(t.$address).call.request({from:t.$address})),i.requestManager.sendBatch(i.requests,(function(i,n){if(!i){var c=n[1].result.decode([{name:"saleLimit",type:"uint256"},{name:"puarchaseLimit",type:"uint256"}]),r=c.puarchaseLimit;if(t.allowance=("string"===typeof n[0]?n[0]:n[0].result).decode(["uint256"]).fromWei().toBN(),t.disabled){var d=("AI"===a?s:o).toWei(),l=Math.floor(r.toBN().div(d).times(100).toFixed());t.value=l>100?100:l}}e()}))})));case 1:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this,e=this.$Router.options.address;(this.disabled||this.disabled1)&&(e=this["$".concat(this.disabled1?"CSRouter":"AIRouter")].options.address),this.contract.methods.approve(e,this.amount.toWei(18).toBN().times(10).toFixed()).send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:vant.Toast.clear(),t.removeLiquidity();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("transaction.text13"))}))},removeLiquidity:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,n,a,s,o,c,r,l,u,b,v,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.info,n=i.lp,a=i.address0,s=i.address1,o=i.decimals0,c=i.decimals1,r=i.symbol0,l=i.symbol1,u=d["h"][t.chainId].main,!n.toBN().div(100).times(t.value).gt(t.allowance)){e.next=6;break}return e.abrupt("return",t.approve());case 6:if(![r,l].includes(u.symbol)){e.next=8;break}return e.abrupt("return",t.removeLiquidityETH());case 8:return b=Math.floor((new Date).getTime()/1e3)+t.deadline,v=t.$Router,(t.disabled||t.disabled1)&&(v=t["$".concat(t.disabled1?"CSRouter":"AIRouter")]),m=v.methods.removeLiquidity(a,s,t.amount.toWei(18),t.token0.toWei(o).toBN().times(.9).toFixed(0),t.token1.toWei(c).toBN().times(.9).toFixed(0),t.$address,b),vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"}),e.prev=13,e.next=16,m.call({from:t.$address});case 16:m.send({from:t.$address}).on("receipt",(function(e){vant.Toast.success(t.$t("pledge.text11")),t.$router.back()})).on("error",(function(e){vant.Toast.fail(t.$t("transaction.text13"))})),e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](13),console.log(e.t0),vant.Toast.fail(t.$t("transaction.text13"));case 23:case"end":return e.stop()}}),e,null,[[13,19]])})))()},removeLiquidityETH:function(){var t=this,e=Math.floor((new Date).getTime()/1e3)+this.deadline,i=this.info.symbol0,n=Number(i!==MainCoin.symbol),a=Number(!n),s=this.disabled?this.$AIRouter:this.$Router;s.methods.removeLiquidityETH(this.info["address".concat(a)],this.amount.toWei(18),this["token".concat(a)].toWei(this.info["decimals".concat(a)]).toBN().times(.9).toFixed(0),this["token".concat(n)].toWei(this.info["decimals".concat(n)]).toBN().times(.9).toFixed(0),this.$address,e).send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",(function(e){vant.Toast.clear(),vant.Toast.success(t.$t("pledge.text11")),t.$router.back()})).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("transaction.text13"))}))}},watch:{value:function(){var t=this.info,e=t.amount0,i=t.amount1,n=t.decimals0,a=t.decimals1;this.amount=this.info.lp.toBN().div(100).times(this.value).toFixed().toFixed(18),this.token0=e.toBN().div(100).times(this.value).toFixed().toFixed(n),this.token1=i.toBN().div(100).times(this.value).toFixed().toFixed(a)}}},u=l,b=u,v=(i("1eac"),i("1450"),i("2877")),m=Object(v["a"])(b,n,a,!1,null,"6ad40c08",null);e["default"]=m.exports},"688f":function(t,e,i){},ab2b:function(t,e,i){},b012:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAA7VBMVEUAAABAQEBgYGBqampwcHBmZmZqampxcXFtbW1zc3NwcHBqampvb29sbGxxcXFubm5ycnJwcHBubm5sbGxvb29tbW1wcHBubm5xcXFwcHBubm5tbW1vb29ubm5wcHBvb29xcXFwcHBvb29tbW1vb29ubm5wcHBvb29wcHBvb29ubm5xcXFvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHCHo3jSAAAATnRSTlMABAgMEBQYGxwfICQnKCssLzAzNDc4Ozw/QENER0hLTE9QU1RXWFtcYGdob3N3e3+Dh4uPl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/vu9AgEAAADAklEQVQYGZXBi0LaZgCG4e8PkCGsVquzo4cN23Wr46iAJUgggBwCyXv/l7MQzpOofR498Wuld6+t0cPNL3qBdTMAAltrRSDsFvUMqzQj9mAUy0yIjb8oydUYmLcKPehkFDkdQuO6EwL9nI57D345LdkzCNq1uhtC30jZRkiQUYIxAy1lPdbaKUWsgLaStPEVM//0A1h0CorloKYkDr42TC6njRxUlGTMUMeYgLYSfICGjnIJsjrKnhDmddQ1uEYHLn9X5NMU7pTABe9MkvmSU8yMmT50poBjlMB+BEbtro+jWImVsG6UKOWwdqWINcMfzKZePa9n/dYc+ZM+uIrcQEWv1oFzSQPmab3aBTSlN9DSTxjiG1WgoCc+/PBh3DrVExUoqAc9W4fSXVbChtGhywnc6j6Ama196UcI3UbTAxyjfVcLmJcluwue0Z4uuHlF3o+hqj0ZH+7SipgH+Fs7n6BnFLOnBLZ2GlDVih3Q084PwrzWrqGkLWvB0GitTWC05eNqw8zpausCytqoQU5b0NBWn6G2vsJHbdQhqy1oamuAp60/4bM2XBbaGeNpIxXgaOst1LX2JqSjnRZcaa0E37UzZZZSLD2EgnbehoxtxS4XzCztlMAxihQn0Na+BkyLRkqVF/BNe6wR9M6kEdBPaZ9xgHl/EAA1HchPgKYeoGF0yFQDYrNv+h+7C1X9C0U9YZe6Q8/5bumJW7hQNqSjnzBlIqlLmNWrFaEm6Roa1smJXmadnMgjzCrySBhC4Bb1HKvkAQu419JX1tyMEp0+shLkFesHTrXaDuAxrQRnC/Bb1Zob3mkll1bE7oGj46wJNFOK5NM6YDy40FElaOq4c2jpqCEzSwmGDHVMGppK0maqNetd8Y9TreWgpCQdJoplGgsi05KlpRzUlMD4uFq68lkbnWhpgasEfwGdd9LlAoblj5/rM5jYUtGDMK/jcg6RYWUCVaNIyoHu7RQI79JK8t4ldqcV02MpvM/rOedNH+ZprZ0Dk3pWLzGF27K2WtULPfEf9L+5wL6T1UQAAAAASUVORK5CYII="},dc9b:function(t,e,i){"use strict";i("ec45")},ec45:function(t,e,i){}}]);