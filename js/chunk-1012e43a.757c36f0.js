(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1012e43a"],{"256c":function(e,t,n){"use strict";n.r(t);n("b0c0"),n("b680"),n("e7e5");var a,i=n("d399"),r=(n("96cf"),n("1da1")),o=n("5530"),s=n("ade3"),c=(n("c3a6"),n("ad06")),d=(n("f1dc"),n("6e47")),l=n("2f62"),u=n("2307"),d={components:(a={},Object(s.a)(a,d.a.name,d.a),Object(s.a)(a,c.a.name,c.a),a),data:function(){return{show:!1,showRule:!1,dealing:!1,MineV3Example:null,energyValue:0,todayMine:0,lastWeekBurnAverage:0,rewardTotalAmount:0,redepositedAmount:0,power:0,earned:0}},computed:Object(o.a)(Object(o.a)({},Object(l.b)(["isConnected","web3","address"])),{},{actualAmount:function(){return this.rewardTotalAmount.toBN().minus(this.redepositedAmount).toFixed()}}),methods:{open:function(e){var t=this;this.earned=e,this.init(),this.show=!0,this.$nextTick(function(){t.initCanvas(0)})},takeReward:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.rewardTotalAmount.toBN().lte(0))return e.abrupt("return",i.a.fail(n.$t("mining.text19")));e.next=2;break;case 2:return n.dealing=!0,t=n.MineV3Example.methods.takeReward(),e.prev=4,e.next=7,t.call({from:n.address});case 7:t.send({from:n.address}).on("receipt",function(e){n.$emit("refreshData"),i.a.success(n.$t("mining.text20")),n.dealing=!1,n.show=!1}).on("error",function(e){n.dealing=!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),n.dealing=!1;case 14:case"end":return e.stop()}},e,null,[[4,10]])}))()},init:function(){var a=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new a.web3.eth.Contract(u.abi,u.address),(a.MineV3Example=t).methods.pendingEnergyValue().call(function(e,t){e||(e=t.value.toBN().div(1e10).gt(100),a.energyValue=e?100:t.value.fromWei(10),a.lastWeekBurnAverage=t.weeklyAverage.fromWei(),a.$nextTick(function(){a.initCanvas(a.energyValue)}))}),t.methods.earnInfo().call(function(e,t){e||(a.todayMine=t.earnedRawrd.fromWei())}),a.earned.toBN().gt(0)&&t.methods.takeReward().call({from:a.address},function(e,t){var n;e||(e=t.rewardTotalAmount,n=t.redepositedAmount,t=t.power,a.rewardTotalAmount=e.fromWei(),a.redepositedAmount=n.fromWei(),a.power=t)});case 5:case"end":return e.stop()}},e)}))()},initCanvas:function(e){var t=this,n=document.getElementById("circle"),a=n.getContext("2d"),i=n.offsetWidth,r=n.offsetHeight,o=i/2+7.5,s=r/2+7.5,c=a.createLinearGradient(0,0,i,0);c.addColorStop(0,"#F9C85D"),c.addColorStop(1,"#FA4317"),n.width=i+15,n.height=r;var d=0,l=setInterval(function(){e<=(d+=.9<d/e?.3:.8<d/e?.55:.7<d/e?.75:1)&&(d=e,clearInterval(l)),a.clearRect(0,0,2*o,2*s),t.circle({ctx:a,x:o,y:s,lineWidth:15}),t.sector({ctx:a,x:o,y:s,lineWidth:15,gradient:c,process:d})},e<50?20:e<70?10:6)},circle:function(e){var t=e.ctx,n=e.x,a=e.y,e=e.lineWidth;t.beginPath(),t.lineWidth=e,t.lineCap="round",t.strokeStyle="#F1DAA4",t.arc(n,a,85,+Math.PI,0),t.stroke()},sector:function(e){var t=e.ctx,n=e.x,a=e.y,i=e.lineWidth,r=e.process,e=e.gradient;t.beginPath(),t.lineWidth=i,t.lineCap="round",t.strokeStyle=e,t.arc(n,a,85,+Math.PI,+Math.PI+r/100*(3*Math.PI/3)),t.stroke()}}},s=(n("3929"),n("2877")),c=Object(s.a)(d,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!t.show}}},[e("div",{staticClass:"take-reward",on:{click:function(e){e.stopPropagation()}}},[e("div",{staticClass:"progress"},[e("canvas",{attrs:{id:"circle"}}),e("div",{staticClass:"content"},[e("span",[t._v(t._s(t.energyValue.toFixed(2))+"%")]),e("span",[t._v(t._s(t.$t("energy_value")))])])]),e("van-icon",{attrs:{name:"question-o"},on:{click:function(e){t.showRule=!0}}}),e("div",{staticClass:"info"},[e("div",[e("span",[t._v(t._s(t.todayMine.toFixed(2)))]),e("span",[t._v(t._s(t.$t("today_output")))])]),e("i"),e("div",[e("span",[t._v(t._s(t.lastWeekBurnAverage.toFixed(2)))]),e("span",[t._v(t._s(t.$t("burn_average")))])])]),e("div",{staticClass:"details"},[e("div",[e("span",[t._v(t._s(t.$t("available"))+"PIN")]),e("span",[t._v(t._s(t.rewardTotalAmount.toFixed(2)))])]),e("div",[e("span",[t._v(t._s(t.$t("claim_RI"))+"PIN")]),e("span",[t._v("-"+t._s(t.redepositedAmount.toFixed(2)))])]),e("div",[e("span",[t._v(t._s(t.$t("get_power")))]),e("span",[t._v("+"+t._s(t.power))])]),e("div",[e("span",[t._v(t._s(t.$t("actual_arrival"))+"PIN")]),e("span",[t._v(t._s(t.actualAmount.toFixed(2)))])])])],1),e("van-button",{attrs:{disabled:t.dealing,loading:t.dealing,"loading-text":t.$t("dealing")},on:{click:function(e){return e.stopPropagation(),t.takeReward(e)}}},[t._v(t._s(t.$t("mining.text56")))]),e("van-overlay",{attrs:{show:t.showRule},on:{click:function(e){e.stopPropagation(),t.showRule=!t.showRule}}},[e("div",{staticClass:"rules",on:{click:function(e){e.stopPropagation()}}},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("rule_description")))]),e("van-icon",{attrs:{name:"close"},on:{click:function(e){t.showRule=!1}}})],1),e("div",{staticClass:"content"},[t._v(t._s(t.$t("take_rule")))])])])],1)},[],!1,null,"f26411fe",null);t.default=c.exports},"2f82":function(e,t,n){},3929:function(e,t,n){"use strict";n("2f82")}}]);