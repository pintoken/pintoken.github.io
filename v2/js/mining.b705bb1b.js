(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mining"],{"89b4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mining tabbar-page"},[i("div",{staticClass:"miningTop"},[i("div",{staticClass:"miningMenus"},[i("div",{staticClass:"miningMenusText"},[t._m(0),i("span",[t._v(t._s(t.$t("mining.text1")))])]),i("div",{staticClass:"lang"},[i("div",{staticClass:"language-container"},[i("img",{attrs:{src:n("f211")},on:{click:function(e){t.showLang=!0}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLang,expression:"showLang"}],staticClass:"overlay",on:{click:function(e){t.showLang=!1}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLang,expression:"showLang"}],staticClass:"language-options"},[i("div",{class:"en"==t.$i18n.locale?"active":"",on:{click:function(e){return t.changeLanguage("en")}}},[i("img",{attrs:{src:n("bc04")}}),i("span",[t._v("English")])]),i("div",{class:"zh"==t.$i18n.locale?"active":"",on:{click:function(e){return t.changeLanguage("zh")}}},[i("img",{attrs:{src:n("be30")}}),i("span",[t._v("中文")])]),i("div",{class:"ko"==t.$i18n.locale?"active":"",on:{click:function(e){return t.changeLanguage("ko")}}},[i("img",{attrs:{src:n("ed4a")}}),i("span",[t._v("한국어")])]),i("div",{class:"ja"==t.$i18n.locale?"active":"",on:{click:function(e){return t.changeLanguage("ja")}}},[i("img",{attrs:{src:n("19ca")}}),i("span",[t._v("日本語")])]),i("div",{class:"hk"==t.$i18n.locale?"active":"",on:{click:function(e){return t.changeLanguage("hk")}}},[i("img",{attrs:{src:n("5c5c")}}),i("span",[t._v("繁体中文")])])])]),i("img",{attrs:{src:n("88d5")},on:{click:function(e){t.miningMenus=!t.miningMenus}}})]),i("van-overlay",{staticClass:"miningMenusNav",attrs:{show:t.miningMenus},on:{click:function(e){t.miningMenus=!t.miningMenus}}},[i("div",{on:{click:function(t){t.stopPropagation()}}},[i("div",{on:{click:function(e){return t.$router.push("./margin")}}},[i("img",{attrs:{src:n("91cd")}}),i("span",[t._v(t._s(t.$t("mining.text3")))]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("./income")}}},[i("img",{attrs:{src:n("bced")}}),i("span",[t._v(t._s(t.$t("mining.text4")))]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("./invitationList")}}},[i("img",{attrs:{src:n("f23e")}}),i("span",[t._v(t._s(t.$t("mining.text5")))]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("./communityManagement")}}},[i("img",{attrs:{src:n("d9eb")}}),i("span",[t._v(t._s(t.$t("mining.text6")))]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("/transaction")}}},[i("img",{attrs:{src:n("a3e4")}}),i("span",[t._v("PinSwap")]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("/token-info")}}},[i("img",{attrs:{src:n("398a")}}),i("span",[t._v(t._s(t.$t("mining.text8")))]),i("img",{attrs:{src:n("93cf")}})]),i("div",{on:{click:function(e){return t.$router.push("/assets")}}},[i("img",{attrs:{src:n("a7ec")}}),i("span",[t._v(t._s(t.$t("mining.text9")))]),i("img",{attrs:{src:n("93cf")}})])])])],1),i("div",{staticClass:"luckyMining"},[i("span",[t._v(t._s(t.canDraw.toFixed(6)))]),i("van-button",{directives:[{name:"ButClickLimit",rawName:"v-ButClickLimit"}],attrs:{disabled:!(!1===t.isMiner||!0===t.isMiner)},on:{click:t.registerClick}},[t._v(t._s(!1===t.isMiner?t.$t("mining.text11"):!0===t.isMiner?t.$t("mining.text12"):t.$t("mining.text22")))]),i("div",{staticClass:"luckyMiningData"},[i("div",{on:{click:function(e){return t.$router.push("/Computingpower")}}},[i("span",[t._v(t._s(t.$t("mining.text13")))]),i("span",[t._v(t._s(t.myPower))])]),i("div"),i("div",{on:{click:function(e){return t.$router.push({path:"/record",query:{type:3}})}}},[i("span",[t._v(t._s(t.$t("mining.text14")))]),i("span",[t._v(t._s(t.totalMing))])])])],1)]),i("div",{staticClass:"joinGroup"},[i("div",[i("div",[i("span",[t._v(t._s(t.$t("mining.text15"))+"Pin"+t._s(t.$t("mining.text16")))]),i("span",[t._v(t._s(t.$t("mining.text17")))]),i("van-button",{on:{click:function(e){return t.$refs.fastJoin.swithShow()}}},[t._v(t._s(t.$t("mining.text18")))])],1),i("div",[i("span",[t._v(t._s(t.$t("mining.text23")))]),i("span",[t._v(t._s(t.$t("mining.text24")))]),i("van-button",{on:{click:t.gotoPledge}},[t._v(t._s(t.$t("mining.text25")))])],1),i("div",[i("span",[t._v(t._s(t.$t("mining.text36")))]),i("span",[t._v(t._s(t.$t("mining.text37")))]),i("van-button",{on:{click:t.gotoDestroy}},[t._v(t._s(t.$t("mining.text38")))])],1)])]),i("div",{staticClass:"LatestParticipation"},[i("span",[t._v(t._s(t.$t("mining.text26")))]),i("span",{on:{click:function(e){return t.$router.push("/history")}}},[t._v(t._s(t.$t("mining.text27"))+">")])]),t._l(t.latestJoin,(function(e,s){return i("div",{key:e.id,staticClass:"Matching"},[i("div",{staticClass:"center"},[i("div",{staticClass:"canvas"},[i("div",{class:"pieChart"+s}),i("div",{staticClass:"overlay"}),i("div",{staticClass:"Middlenumber"},[i("div",{staticClass:"up"}),i("i"),i("div",{staticClass:"center-number"},[t._v(t._s(e.luckyNum))]),i("div",{staticClass:"down"})])]),i("div",{staticClass:"Leftinformation"},[i("div",{staticClass:"leftMatching"},[1===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"zh"==t.$i18n.locale,expression:"$i18n.locale == 'zh' "}],attrs:{src:n("fb3f")}}):2===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"zh"==t.$i18n.locale,expression:"$i18n.locale == 'zh' "}],attrs:{src:n("758e")}}):3===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"zh"==t.$i18n.locale,expression:"$i18n.locale == 'zh' "}],attrs:{src:n("fd98")}}):4===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"zh"==t.$i18n.locale,expression:"$i18n.locale == 'zh' "}],attrs:{src:n("e49d")}}):i("img",{directives:[{name:"show",rawName:"v-show",value:"zh"==t.$i18n.locale,expression:"$i18n.locale == 'zh' "}],attrs:{src:n("4b7f")}}),1===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"en"==t.$i18n.locale,expression:"$i18n.locale == 'en' "}],attrs:{src:n("d93f")}}):2===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"en"==t.$i18n.locale,expression:"$i18n.locale == 'en' "}],attrs:{src:n("6a71")}}):3===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"en"==t.$i18n.locale,expression:"$i18n.locale == 'en' "}],attrs:{src:n("d99a")}}):4===e.status?i("img",{directives:[{name:"show",rawName:"v-show",value:"en"==t.$i18n.locale,expression:"$i18n.locale == 'en' "}],attrs:{src:n("61a0")}}):i("img",{directives:[{name:"show",rawName:"v-show",value:"en"==t.$i18n.locale,expression:"$i18n.locale == 'en' "}],attrs:{src:n("6eda")}})]),i("span",[t._v(t._s(t.$t("mining.text28"))+t._s(e.id))]),i("span",[t._v(t._s(t.$t("mining.text29"))+t._s(e.awardBlock))]),i("span",[t._v(t._s(t.$t("mining.text30"))+t._s(e.luckyNum))]),t._m(1,!0),i("div",{staticClass:"Matchdetails"},[i("button",{on:{click:function(n){return t.$router.push({path:"/Piece",query:{id:e.id}})}}},[t._v(t._s(t.$t("mining.text31")))]),e.isPin?i("button",{staticClass:"isJoin",on:{click:function(e){return t.$refs.fastJoin.swithShow()}}},[t._v(t._s(t.$t("mining.text32")))]):[[3,5].includes(e.status)?i("button",{staticClass:"isJoin",attrs:{disabled:1!==e.status},on:{click:function(e){return t.$refs.fastJoin.swithShow()}}},[t._v(t._s(t.$t("mining.text33")))]):i("button",{attrs:{disabled:1!==e.status},on:{click:function(e){return t.$refs.fastJoin.swithShow()}}},[t._v(t._s(t.$t("mining.text33")))])]],2)])])])})),i("register",{ref:"register",on:{refreshData:t.init}}),i("upgrade",{ref:"upgrade"}),i("fast-join",{ref:"fastJoin",on:{refreshList:t.refreshList}}),i("redemption-all")],2)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("i",[i("span",[t._v("Pin")]),t._v("Swap")]),i("img",{attrs:{src:n("68da")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"usdt"},[i("img",{attrs:{src:n("495a"),alt:""}}),i("span",[t._v("500 USDT")])])}],a=(n("caad"),n("d81d"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("2532"),n("96cf"),n("1da1")),r=n("5530"),c=n("d4ec"),o=n("bee2"),u=function(){function t(e){Object(c["a"])(this,t),this.echart=echarts.init(e),this.echart.setOption({tooltip:{show:!1},color:["#2D92FD","#57AEFD","#57AEFD","#1870D9","#1B7AE7","#1E84F5","#2D92FD","#409FFD","#57AEFD","#6BBBFD"],series:[{name:"访问来源",type:"pie",radius:["50%","90%"],avoidLabelOverlap:!1,label:{show:!0,position:"inside",color:"#fff",fontSize:"10"},animation:!1,emphasis:{scaleSize:10},startAngle:109,labelLine:{show:!1},data:[{value:1,name:"0"},{value:1,name:"1"},{value:1,name:"2"},{value:1,name:"3"},{value:1,name:"4"},{value:1,name:"5"},{value:1,name:"6"},{value:1,name:"7"},{value:1,name:"8"},{value:1,name:"9"}]}]})}return Object(o["a"])(t,[{key:"set",value:function(t){this.echart.setOption({color:t})}}]),t}(),l=n("aca7"),g={components:{register:function(){return n.e("transaction").then(n.bind(null,"ea78"))},upgrade:function(){return n.e("transaction").then(n.bind(null,"742c"))},"fast-join":function(){return n.e("transaction").then(n.bind(null,"e531"))},"redemption-all":function(){return n.e("transaction").then(n.bind(null,"fbe3"))}},data:function(){return{miningMenus:!1,isMiner:"",canDraw:0,myPower:0,totalMing:0,lv:0,getShiftSwitch:!1,interval:-1,isStart:!1,showLang:!1}},computed:Object(r["a"])({},Vuex.mapState(["latestJoin"])),created:function(){this.$pingSwapContracts&&this.init()},methods:{init:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,c,o,g,m,d,h,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.miningMenus=!1,t.latestJoin.length>0&&t.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=0;n<t.latestJoin.length;n++){for(i=document.querySelector(".pieChart".concat(n)),s=["#10499A","#1155B4","#1666CB","#1870D9","#1B7AE7","#1E84F5","#2D92FD","#409FFD","#57AEFD","#6BBBFD"],a=["#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5"],r=0;r<t.latestJoin[n].players;r++)a[r]=s[r];c=new u(i),c.set(a),c.echart.dispatchAction({type:"highlight",dataIndex:-1})}case 1:case"end":return e.stop()}}),e)})))),t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Relation.address,method:"_recommerMapping",parameter:[t.$address]}).then((function(e){t.isMiner=e!==l["j"],t.$store.commit("isMiner",t.isMiner)})),n=[],e.next=6,t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Pin.address,method:"getWorldNewRound"});case 6:i=e.sent,s=i.length>2?2:i.length,r=0;case 9:if(!(r<s)){e.next=28;break}return c=i[r].toString(),e.next=13,t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Pin.address,method:"rounds",parameter:[c]});case 13:return o=e.sent,g=o.prepareBlock,m=o.luckyValue,e.next=18,t.getDrawState(g.toNumber(),m);case 18:return d=e.sent,e.next=21,t.searchIsPin(c);case 21:h=e.sent,v=h.isPin,p=h.players,n.push({isPin:v,status:d,players:p,id:c,awardBlock:g.toNumber()+10,luckyNum:m<10?m:"?"});case 25:r++,e.next=9;break;case 28:t.$store.commit("latestJoin",n),t.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,a,r,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=0;e<s;e++){for(i=document.querySelector(".pieChart".concat(e)),a=["#10499A","#1155B4","#1666CB","#1870D9","#1B7AE7","#1E84F5","#2D92FD","#409FFD","#57AEFD","#6BBBFD"],r=["#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5","#C9D7F5"],c=0;c<n[e].players;c++)r[c]=a[c];o=new u(i),o.set(r),o.echart.dispatchAction({type:"highlight",dataIndex:-1})}case 1:case"end":return t.stop()}}),t)})))),t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Mine.address,method:"isStart"}).then((function(e){t.isStart=e})),t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Mine.address,method:"mineInfo"}).then((function(e){var n=e.myPower,i=e.mined;t.myPower=n.toString(),t.totalMing=i.toString().fromSun().toFixed(4)})),t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Mine.address,method:"drawPin"}).then((function(e){t.canDraw=e.toString().fromSun()})),t.interval=setInterval(Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$tronWeb.call({contractAddress:t.$pingSwapContracts.Mine.address,method:"drawPin"});case 2:n=e.sent.toString().fromSun(),t.canDraw=n;case 4:case"end":return e.stop()}}),e)}))),5e3);case 34:case"end":return e.stop()}}),e)})))()},getDrawState:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0!==t){i.next=2;break}return i.abrupt("return",1);case 2:return i.next=4,n.$tronWeb.getBlockNumber();case 4:if(s=i.sent,!(s>=t&&s<=t+10)){i.next=9;break}return i.abrupt("return",2);case 9:if(!(s>t+10&&e>=0&&e<10)){i.next=13;break}return i.abrupt("return",3);case 13:if(!(s>t&&s<t+255)){i.next=17;break}return i.abrupt("return",4);case 17:return i.abrupt("return",5);case 18:case"end":return i.stop()}}),i)})))()},searchIsPin:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$tronWeb.call({contractAddress:e.$pingSwapContracts.Pin.address,method:"getRoundPlayers",parameter:[t]});case 2:return i=n.sent,n.abrupt("return",{isPin:i.map((function(t){return window.tronWeb.address.fromHex(t)})).includes(e.$address),players:i.length});case 4:case"end":return n.stop()}}),n)})))()},refreshList:function(){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},drawPin:function(){var t=this;return this.isStart?Number(this.canDraw)?void this.$tronWeb.call({contractAddress:this.$pingSwapContracts.Mine.address,method:"drawPin",options:{feeLimit:this.$store.state.generalFeeLimit.toSun()}}).then((function(e){e&&t.$pingSwapContracts.Mine.drawPin().send({feeLimit:t.$store.state.generalFeeLimit.toSun()}).then((function(e){t.$loading(e).then((function(e){e&&(t.init(),t.$getBalance(),vant.Toast.success(t.$t("mining.text20")))}))}))})):vant.Toast.fail(this.$t("mining.text19")):vant.Toast.fail("合约暂未生效！")},startTeam:function(){this.isMiner?(this.miningMenus=!1,vant.Toast.fail(this.$t("mining.text21"))):this.$router.push("./startTeam")},registerClick:function(){this.isMiner?this.drawPin():(this.$refs.register.type="register",this.$refs.register.fee=this.$store.state.registerFee,this.$refs.register.swithShow())},gotoPledge:function(){this.isMiner?this.$router.push("/partake-pledge"):(this.$refs.register.type="register",this.$refs.register.fee=this.$store.state.registerFee,this.$refs.register.swithShow())},gotoDestroy:function(){this.isMiner?this.$router.push("/destroy"):(this.$refs.register.type="register",this.$refs.register.fee=this.$store.state.registerFee,this.$refs.register.swithShow())},changeLanguage:function(t){this.$i18n.locale=t,localStorage.setItem("language",t),this.showLang=!1}},destroyed:function(){clearInterval(this.interval)}},m=g,d=m,h=(n("b9e0"),n("2877")),v=Object(h["a"])(d,i,s,!1,null,"7e8058ec",null);e["default"]=v.exports},"8f9f":function(t,e,n){},b9e0:function(t,e,n){"use strict";n("8f9f")}}]);